<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>NEET Study Hub - Latest NEET Blogs</title>

 <!-- Google Fonts & Icons -->
 <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 <link href="style.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        header {
            text-align: center;
            padding: 20px;
            background-color: #007bff;
            color: white;
        }

        #posts {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .post-card {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .post-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .post-content {
            padding: 15px;
        }

        .post-content h2 {
            font-size: 18px;
            margin: 0 0 10px;
            color: #333;
        }

        .post-content p {
            font-size: 14px;
            margin: 0 0 10px;
            color: #555;
        }

        .labels span {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 5px;
        }

        .buttons {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        .button {
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 14px;
            flex: 1;
        }

        .download {
            background-color: #007bff;
        }

        .solution {
            background-color: #28a745;
        }

        .button:hover {
            opacity: 0.8;
        }

        #loadMoreBtn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        #loadMoreBtn:hover {
            background-color: #0056b3;
        }

        .text-center {
            text-align: center;
        }

        /* Skeleton loader */
        .skeleton {
            background-color: #e0e0e0;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-color: #e0e0e0; }
            50% { background-color: #f0f0f0; }
            100% { background-color: #e0e0e0; }
        }

        .skeleton-img {
            width: 100%;
            height: 180px;
        }

        .skeleton-text {
            height: 16px;
            margin: 10px;
            border-radius: 4px;
        }

        .skeleton-text.short {
            width: 40%;
        }
    </style>
</head>
<body>
   <!-- Header -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" href="index.html">
      <i class="fas fa-microscope me-2"></i>NEET Study Hub
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="pyqs.html">PYQs</a></li>
        <li class="nav-item"><a class="nav-link" href="ncert.html">NCERT PDFs</a></li>
        <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
      </ul>
    </div>
  </div>
</nav>
<div class="heading">
  <h1 class="text-center" style="margin: 16px;">Latest Blog Posts</h1>
</div>
    <div id="posts"></div>
    <button id="loadMoreBtn" style="display: none;">Load More</button>
 <footer class="bg-dark text-white py-4">
   <div class="container">
     <div class="row">
       <div class="col-md-4 mb-4 mb-md-0">
         <h5 class="mb-3">NEET Study Hub</h5>
         <p>Your complete NEET preparation companion with comprehensive study materials and resources.</p>
       </div>
       <div class="col-md-4 mb-4 mb-md-0">
         <h5 class="mb-3">Quick Links</h5>
         <ul class="list-unstyled">
           <li><a href="pyqs.html" class="text-white-50">PYQs</a></li>
           <li><a href="ncert.html" class="text-white-50">NCERT PDFs</a></li>
           <li><a href="blog.html" class="text-white-50">Blog</a></li>
         </ul>
       </div>
       <div class="col-md-4">
         <h5 class="mb-3">Connect With Us</h5>
         <div class="social-links mb-4">
           <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
           <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
           <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
           <a href="#" class="text-white"><i class="fab fa-youtube"></i></a>
         </div>
       </div>
     </div>
     <hr class="my-4">
     <div class="text-center">
       <div class="d-flex justify-content-center gap-4 mb-3">
         <a href="about.html" class="text-white-50 text-decoration-none">About Us</a>
         <a href="contact.html" class="text-white-50 text-decoration-none">Contact Us</a>
         <a href="privacy.html" class="text-white-50 text-decoration-none">Privacy Policy</a>
         <a href="login.html" class="text-white-50 text-decoration-none">Admin Panel</a>
       </div>
       <p class="mb-0">&copy; 2025 NEET Study Hub. All rights reserved.</p>
     </div>
   </div>
 </footer>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const cloudflareProxy = "https://neetstudyhub-api-proxy.earnmoney100a.workers.dev"; // Replace with your Cloudflare Worker URL
        const postsContainer = document.getElementById("posts");
        const loadMoreBtn = document.getElementById("loadMoreBtn");

        let allPosts = [];
        let filteredPosts = [];
        let currentIndex = 0;
        const postsPerPage = 12;

        const allowedLabels = ["PYQPDF", "pyqpdf", "Pyqpdf", "PYQpdf"];

        function showSkeleton() {
            postsContainer.innerHTML = "";
            for (let i = 0; i < postsPerPage; i++) {
                const skeleton = document.createElement("div");
                skeleton.classList.add("post-card", "skeleton");
                skeleton.innerHTML = `
                    <div class="skeleton-img"></div>
                    <div class="post-content">
                        <div class="skeleton-text short"></div>
                        <div class="skeleton-text"></div>
                    </div>
                `;
                postsContainer.appendChild(skeleton);
            }
        }

        async function fetchPosts() {
            showSkeleton();
            try {
                const response = await fetch(cloudflareProxy); // Use the Worker URL instead of direct API
                const data = await response.json();
                allPosts = data.items || [];
                filteredPosts = allPosts.filter(post => 
                    post.labels && post.labels.some(label => allowedLabels.includes(label))
                );
                if (filteredPosts.length > 0) {
                    displayPosts();
                } else {
                    postsContainer.innerHTML = `<p class="text-center">No posts related to PYQs found.</p>`;
                }
            } catch (error) {
                console.error("Error fetching posts:", error);
            }
        }

        function extractThumbnail(postContent) {
            const match = postContent.match(/<img.*?src=["'](.*?)["']/);
            return match ? match[1] : "https://via.placeholder.com/300x180";
        }

        function extractButtonLink(postContent, buttonClass) {
            const parser = new DOMParser();
            const contentDoc = parser.parseFromString(postContent, "text/html");
            const button = contentDoc.querySelector(`.${buttonClass}`);
            return button ? button.href : "#"; // Return "#" if the button is not found
        }

        function displayPosts() {
            postsContainer.innerHTML = "";
            const postsToShow = filteredPosts.slice(currentIndex, currentIndex + postsPerPage);

            postsToShow.forEach(post => {
                const postElement = document.createElement("div");
                postElement.classList.add("post-card");
                const postThumbnail = extractThumbnail(post.content);
                const downloadLink = extractButtonLink(post.content, "download-button");
                const solutionLink = extractButtonLink(post.content, "solution-button");
                const labels = post.labels
                    ? post.labels.map(label => `<span>${label}</span>`).join(" ")
                    : "";

                postElement.innerHTML = `
                    <a href="post.html?id=${post.id}" style="text-decoration: none; color: inherit;">
                        <img src="${postThumbnail}" alt="Post Image">
                        <div class="post-content">
                            <h2>${post.title}</h2>
                            <p>${post.content.replace(/<[^>]*>/g, "").substring(0, 100)}...</p>
                            <div class="labels">${labels}</div>
                            <div class="buttons">
                                <a href="${downloadLink}" class="button download" target="_blank">Download</a>
                                <a href="${solutionLink}" class="button solution" target="_blank">Solutions</a>
                            </div>
                        </div>
                    </a>
                `;
                postsContainer.appendChild(postElement);
            });

            currentIndex += postsPerPage;

            if (filteredPosts.length > currentIndex) {
                loadMoreBtn.style.display = "block";
            } else {
                loadMoreBtn.style.display = "none";
            }
        }

        loadMoreBtn.addEventListener("click", displayPosts);
        fetchPosts();
    </script>
</body>
</html>
